(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4NsP":function(t,n,i){"use strict";i.r(n),i.d(n,"InstitutionsModule",(function(){return $}));var o=i("Valr"),e=i("DUip"),a=i("wHSu"),c=i("TYT/"),r=i("2yus"),l=i("JOp9"),s=i("2MiI"),d=i("A27j"),u=i("6BC6"),b=i("QJY3"),f=i("qSak"),g=i("o8Qb");function p(t,n){1&t&&c.Ob(0,"app-loading-block")}var m=function(t){return["/","institutions","add",t]};function h(t,n){if(1&t&&(c.Tb(0,"li",9),c.Tb(1,"div",10),c.Tb(2,"b"),c.Cc(3),c.Sb(),c.Tb(4,"small",11),c.Cc(5),c.Sb(),c.Sb(),c.Tb(6,"div"),c.Tb(7,"small"),c.Cc(8),c.Sb(),c.Sb(),c.Sb()),2&t){var i=n.$implicit;c.kc("routerLink",c.nc(4,m,null==i?null:i.id)),c.Bb(3),c.Ec("",null==i?null:i.name," "),c.Bb(2),c.Dc(null==i?null:i.level),c.Bb(3),c.Dc(null==i?null:i.address)}}function T(t,n){if(1&t&&(c.Tb(0,"ul"),c.Ac(1,h,9,6,"li",8),c.Sb()),2&t){var i=c.ec();c.Bb(1),c.kc("ngForOf",i.data)}}var S=function(){return["/","institutions","add"]},O=function(){function t(t,n){var i=this;this.rest=t,this.shared=n,this.faHome=a.d,this.faPlus=a.f,this.data=[],this.loading=!1,this.page=1,this.limit=9,this.src="",this.roundInnerHeight=function(t,n,i){return void 0===i&&(i=.02),parseInt(String(t+n))+parseInt(String(t+n))*i},this.search=function(t){i.data=[],t.length>2?(i.page=1,i.actualPage=null,i.load(["&src="+t])):(i.actualPage=null,i.page=1,i.load())},this.load=function(t){void 0===t&&(t=[]);var n=["institutions","?limit="+i.limit];i.page&&i.actualPage!==i.page&&!i.loading&&(n=["institutions?","limit="+i.limit+"&page="+i.page,""+t.join("")],i.loading=!0,i.rest.get(n.join("")).subscribe((function(t){return i.parseDate(t.data.data,t.data.next_page_url,t.data.from)}),(function(t){i.loading=!1})))},this.parseDate=function(t,n,o){void 0===t&&(t=[]),i.actualPage=o,i.loading=!1,i.page=i.shared.parsePageUrl(n),t.map((function(t){return i.data.push(t)}))}}return t.prototype.onScroll=function(){this.roundInnerHeight(window.innerHeight,window.scrollY)>parseInt(String(document.body.offsetHeight))&&this.load()},t.prototype.ngOnInit=function(){this.load()},t.\u0275fac=function(n){return new(n||t)(c.Nb(r.a),c.Nb(l.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-list"]],hostBindings:function(t,n){1&t&&c.bc("scroll",(function(){return n.onScroll()}),!1,c.sc)},decls:11,vars:10,consts:[[3,"label","icon"],[1,"list-user","p-2","pl-3","pr-3"],[1,"text-right","mb-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"routerLink"],[3,"icon"],[1,"form-group"],["autocomplete","off","type","text","id","src","placeholder","Buscar...",1,"form-control","src-input",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"d-flex","justify-content-between"],[1,"text-muted"]],template:function(t,n){1&t&&(c.Ob(0,"app-header",0),c.fc(1,"translate"),c.Ob(2,"app-logged-user"),c.Tb(3,"div",1),c.Tb(4,"div",2),c.Tb(5,"button",3),c.Ob(6,"fa-icon",4),c.Sb(),c.Sb(),c.Tb(7,"div",5),c.Tb(8,"input",6),c.bc("ngModelChange",(function(t){return n.src=t}))("ngModelChange",(function(t){return n.search(t)})),c.Sb(),c.Sb(),c.Ac(9,p,1,0,"app-loading-block",7),c.Ac(10,T,2,1,"ul",7),c.Sb()),2&t&&(c.kc("label",c.gc(1,7,"HEADER.INSTITUTIONS"))("icon",n.faHome),c.Bb(5),c.kc("routerLink",c.mc(9,S)),c.Bb(1),c.kc("icon",n.faPlus),c.Bb(2),c.kc("ngModel",n.src),c.Bb(1),c.kc("ngIf",n.loading),c.Bb(1),c.kc("ngIf",!n.loading))},directives:[s.a,d.a,e.d,u.a,b.c,b.n,b.p,o.k,f.a,o.j],pipes:[g.c],styles:[".list-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;font-size:.8rem;background-color:#fff}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem;margin-bottom:.5rem;border-bottom:1px solid #f4f4f4}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0}.src-input[_ngcontent-%COMP%]{border:0 solid #fff;border-radius:3px;font-size:.8rem;background-color:hsla(0,0%,100%,.45)}"]}),t}(),I=i("jioA"),k=i("cUzu"),v=i("hMSI"),C=i("zRhN"),B=i("JYfv"),N=i("YRkU"),M=function(t,n){return["/","forms",t,"add",n]},y=function(t){return["/","forms",t,"add"]};function A(t,n){if(1&t&&(c.Tb(0,"li",2),c.Tb(1,"div"),c.Ob(2,"fa-icon",3),c.Tb(3,"span",4),c.Cc(4),c.Sb(),c.Sb(),c.Sb()),2&t){var i=n.$implicit,o=c.ec(2);c.kc("routerLink",o.target?c.oc(3,M,null==i?null:i.id,o.target):c.nc(6,y,null==i?null:i.id)),c.Bb(2),c.kc("icon",o.faTasks),c.Bb(2),c.Dc(null==i?null:i.title)}}function D(t,n){if(1&t&&(c.Tb(0,"ul"),c.Ac(1,A,5,8,"li",1),c.Sb()),2&t){var i=c.ec();c.Bb(1),c.kc("ngForOf",i.data)}}function P(t,n){1&t&&c.Ob(0,"app-loading-block")}var w=function(){function t(t){var n=this;this.rest=t,this.target=null,this.faTasks=a.i,this.loading=!1,this.load=function(t){void 0===t&&(t=""),n.loading=!0,n.rest.get("forms?filters=source,=,"+t).subscribe((function(t){n.data=t.data.data,n.loading=!1}),(function(t){n.loading=!1}))}}return t.prototype.ngOnInit=function(){this.load("institutions")},t.\u0275fac=function(n){return new(n||t)(c.Nb(r.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-list-forms"]],inputs:{target:"target"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[3,"icon"],[1,"ml-1"]],template:function(t,n){1&t&&(c.Ac(0,D,2,1,"ul",0),c.Ac(1,P,1,0,"app-loading-block",0)),2&t&&(c.kc("ngIf",!n.loading),c.Bb(1),c.kc("ngIf",n.loading))},directives:[o.k,o.j,e.d,u.a,f.a],styles:["[_nghost-%COMP%]{display:block}ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:#fcfcfc;padding:.45rem;margin-bottom:.25rem}"]}),t}();function E(t,n){if(1&t&&(c.Tb(0,"div",6),c.Tb(1,"label",10),c.Cc(2),c.fc(3,"translate"),c.Sb(),c.Ob(4,"app-list-forms",28),c.Sb()),2&t){var i=c.ec();c.Bb(2),c.Dc(c.gc(3,2,"INSTITUTIONS.FORM.FORMS")),c.Bb(2),c.kc("target",i.id)}}function R(t,n){}function _(t,n){if(1&t&&c.Ob(0,"img",32),2&t){var i=c.ec().$implicit;c.kc("src",null==i?null:i.src,c.vc)}}function x(t,n){if(1&t&&c.Ob(0,"img",32),2&t){var i=c.ec().$implicit;c.kc("src",null==i?null:i.small,c.vc)}}var F=function(t){return{"image-loading":t}};function L(t,n){if(1&t){var i=c.Ub();c.Tb(0,"div",29),c.Tb(1,"span",30),c.bc("click",(function(){c.tc(i);var t=n.$implicit;return c.ec().removeImage(t)})),c.Ob(2,"fa-icon",4),c.Sb(),c.Ac(3,_,1,1,"img",31),c.Ac(4,x,1,1,"img",31),c.Sb()}if(2&t){var o=n.$implicit,e=c.ec();c.kc("ngClass",c.nc(4,F,null==o?null:o.loading)),c.Bb(2),c.kc("icon",e.faTimes),c.Bb(1),c.kc("ngIf",null==o?null:o.src),c.Bb(1),c.kc("ngIf",null==o?null:o.small)}}var H=function(){return{standalone:!0}},U=function(){function t(t,n,i,o,e,c,r){var l=this;this.formBuilder=t,this.rest=n,this.router=i,this.shared=o,this.http=e,this.cookie=c,this.route=r,this.faHome=a.d,this.faDownload=a.c,this.faTrash=a.k,this.faCamera=a.a,this.faImage=a.e,this.faTimes=a.j,this.loading=!1,this.id=!1,this.images=[],this.institutions=[],this.adapter=new I.a(this.http,this.cookie),this.onSubmit=function(){l.loading=!0,l.form.patchValue({extra:l.itemsAsObjects,images:l.images}),l.rest[l.id?"put":"post"]("institutions"+(l.id?"/"+l.id:""),l.form.value).subscribe((function(t){l.loading=!1,l.router.navigate(["/","institutions","add",t.data.id])}),(function(t){l.loading=!1}))},this.load=function(t){void 0===t&&(t=!1),l.rest.get("institutions/"+l.id+(t?"?export=pdf":"")).subscribe((function(t){l.itemsAsObjects=l.shared.wrapperDataExtra(t.data),l.images=t.data.images,l.form.patchValue(t.data)}),(function(t){}))},this.trash=function(){l.shared.confirm("\xbfSeguro?","","OK").then((function(t){l.rest.delete("institutions/"+l.id).subscribe((function(){return l.router.navigate(["/","institutions"])}),(function(t){}))}))},this.report=function(){l.shared.confirm("Reporte","","OK").then((function(t){l.rest.get("institutions/"+l.id+"?export=pdf").subscribe((function(t){window.open(t.data.url)}),(function(t){}))}))},this.addImage=function(t){l.loading=!0,l.shared.toBase64(t.file).then((function(n){l.images.push({name:t.fileName,src:n,loading:!0})}))},this.uploadImage=function(t){l.loading=!1,l.images.forEach((function(n){t.fileName===n.name&&(n.online=JSON.parse(t.fileId),n.loading=!1,n.id=n.online.id)}))},this.uploadImageFail=function(t){l.loading=!1},this.removeImage=function(t){l.images=l.images.filter((function(n){return n.id!==t.id}))},this.loadInstitutions=function(){l.rest.get("institutions?limit=10000").subscribe((function(t){l.institutions=t.data.data}),(function(t){}))}}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe((function(n){t.id=n.id,t.load(),t.loadInstitutions()})),this.form=this.formBuilder.group({name:["",b.u.required],address:["",b.u.required],description:[""],images:[""],extra:[""]})},t.\u0275fac=function(n){return new(n||t)(c.Nb(b.e),c.Nb(r.a),c.Nb(e.c),c.Nb(l.a),c.Nb(k.a),c.Nb(v.a),c.Nb(e.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-add"]],decls:66,vars:57,consts:[[3,"label","icon"],[1,"edit-add-user","p-2","pl-2","pr-2","ml-3","mr-3"],[1,"d-flex","pt-0","pb-1","mb-2","pl-0","pr-0","border-bottom-section"],[1,"badge","badge-info","mr-2",3,"click"],[3,"icon"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","form_name"],["type","text","formControlName","name","id","form_name","placeholder","",1,"form-control"],[1,"form-text","text-muted"],["for","form_address"],["type","text","formControlName","address","id","form_address","placeholder","",1,"form-control"],["for","form_description"],["name","","id","form_description","formControlName","description","cols","30","rows","3",1,"form-control"],[3,"identifyBy","displayBy","placeholder","ngModel","ngModelOptions","ngModelChange"],["class","form-group",4,"ngIf"],["itemTemplate",""],[1,"col-12","row","m-0","p-0"],["class","col-4 pl-0 pt-0 pb-1 pr-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-4","p-0"],[1,"customPicker",3,"adapter","itemTemplate","fileAdded","uploadSuccess","uploadFail"],[1,"dropzoneTemplate","text-center"],["size","2x",3,"icon"],[1,"d-flex"],[1,"w-75"],[1,"btn","btn-info","w-100",3,"appLoadingButton","dis","label"],[1,"w-25","pl-1"],["type","button",1,"btn","btn-danger","w-100",3,"disabled","click"],[3,"target"],[1,"col-4","pl-0","pt-0","pb-1","pr-1",3,"ngClass"],[1,"icon-close",3,"click"],["class","img-gallery","alt","",3,"src",4,"ngIf"],["alt","",1,"img-gallery",3,"src"]],template:function(t,n){if(1&t&&(c.Ob(0,"app-header",0),c.fc(1,"translate"),c.Ob(2,"app-logged-user"),c.Tb(3,"div",1),c.Tb(4,"div",2),c.Tb(5,"span",3),c.bc("click",(function(){return n.report()})),c.Ob(6,"fa-icon",4),c.Cc(7),c.fc(8,"translate"),c.Sb(),c.Sb(),c.Tb(9,"form",5),c.bc("ngSubmit",(function(){return n.onSubmit()})),c.Tb(10,"div",6),c.Tb(11,"label",7),c.Cc(12),c.fc(13,"translate"),c.Sb(),c.Ob(14,"input",8),c.Tb(15,"small",9),c.Cc(16),c.fc(17,"translate"),c.Sb(),c.Sb(),c.Tb(18,"div",6),c.Tb(19,"label",10),c.Cc(20),c.fc(21,"translate"),c.Sb(),c.Ob(22,"input",11),c.Tb(23,"small",9),c.Cc(24),c.fc(25,"translate"),c.Sb(),c.Sb(),c.Tb(26,"div",6),c.Tb(27,"label",12),c.Cc(28),c.fc(29,"translate"),c.Sb(),c.Ob(30,"textarea",13),c.Tb(31,"small",9),c.Cc(32),c.fc(33,"translate"),c.Sb(),c.Sb(),c.Tb(34,"div",6),c.Tb(35,"label"),c.Cc(36),c.fc(37,"translate"),c.Sb(),c.Tb(38,"tag-input",14),c.bc("ngModelChange",(function(t){return n.itemsAsObjects=t})),c.Sb(),c.Tb(39,"small",9),c.Cc(40),c.fc(41,"translate"),c.Sb(),c.Sb(),c.Ac(42,E,5,4,"div",15),c.Tb(43,"div",6),c.Tb(44,"label"),c.Cc(45),c.fc(46,"translate"),c.Sb(),c.Ac(47,R,0,0,"ng-template",null,16,c.Bc),c.Tb(49,"div",17),c.Ac(50,L,5,6,"div",18),c.Tb(51,"div",19),c.Tb(52,"ngx-file-picker",20),c.bc("fileAdded",(function(t){return n.addImage(t)}))("uploadSuccess",(function(t){return n.uploadImage(t)}))("uploadFail",(function(t){return n.uploadImageFail(t)})),c.Tb(53,"div",21),c.Ob(54,"fa-icon",22),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(55,"small",9),c.Cc(56),c.fc(57,"translate"),c.Sb(),c.Sb(),c.Tb(58,"div",23),c.Tb(59,"div",24),c.Tb(60,"button",25),c.fc(61,"translate"),c.Cc(62," ENVIAR "),c.Sb(),c.Sb(),c.Tb(63,"div",26),c.Tb(64,"button",27),c.bc("click",(function(){return n.trash()})),c.Ob(65,"fa-icon",4),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){var i=c.rc(48);c.kc("label",c.gc(1,30,"HEADER.INSTITUTIONS"))("icon",n.faHome),c.Bb(6),c.kc("icon",n.faDownload),c.Bb(1),c.Ec(" ",c.gc(8,32,"INSTITUTIONS.REPORT"),""),c.Bb(2),c.kc("formGroup",n.form),c.Bb(3),c.Dc(c.gc(13,34,"INSTITUTIONS.FORM.NAME")),c.Bb(4),c.Dc(c.gc(17,36,"INSTITUTIONS.FORM.NAME_PLACEHOLDER")),c.Bb(4),c.Dc(c.gc(21,38,"INSTITUTIONS.FORM.ADDRESS")),c.Bb(4),c.Dc(c.gc(25,40,"INSTITUTIONS.FORM.ADDRESS_PLACEHOLDER")),c.Bb(4),c.Dc(c.gc(29,42,"INSTITUTIONS.FORM.DESCRIPTION")),c.Bb(4),c.Dc(c.gc(33,44,"INSTITUTIONS.FORM.DESCRIPTION_PLACEHOLDER")),c.Bb(4),c.Dc(c.gc(37,46,"INSTITUTIONS.FORM.TAG")),c.Bb(2),c.kc("identifyBy","key")("displayBy","value")("placeholder","")("ngModel",n.itemsAsObjects)("ngModelOptions",c.mc(56,H)),c.Bb(2),c.Dc(c.gc(41,48,"USER.FORM.TAG_PLACEHOLDER")),c.Bb(2),c.kc("ngIf",n.id),c.Bb(3),c.Dc(c.gc(46,50,"INSTITUTIONS.FORM.IMAGES")),c.Bb(5),c.kc("ngForOf",n.images),c.Bb(2),c.kc("adapter",n.adapter)("itemTemplate",i),c.Bb(2),c.kc("icon",n.faImage),c.Bb(2),c.Dc(c.gc(57,52,"INSTITUTIONS.FORM.IMAGES_PLACEHOLDER")),c.Bb(4),c.kc("appLoadingButton",n.loading)("dis",!n.form.valid)("label",c.gc(61,54,"GENERAL.LOADING")),c.Bb(4),c.kc("disabled",!n.form.valid),c.Bb(1),c.kc("icon",n.faTrash)}},directives:[s.a,d.a,u.a,b.w,b.o,b.j,b.c,b.n,b.h,C.a,b.p,o.k,o.j,B.b,N.a,w,o.i],pipes:[g.c],styles:[".edit-add-user[_ngcontent-%COMP%]{padding:0;list-style:none;font-size:.8rem;background-color:#fff}.form-control[_ngcontent-%COMP%]{border-radius:0;font-size:.8rem;background-color:#fafafa;border:0 solid #fff;border-bottom:1px solid #ddd}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #ff756b}.border-bottom-section[_ngcontent-%COMP%]{border-bottom:1px solid #fafafa}.badge[_ngcontent-%COMP%]{font-size:90%;background-color:#00bcd4;color:#fff;font-weight:500;border-radius:3px;padding:.35rem}"]}),t}(),j=[{path:"",component:O},{path:"add",component:U},{path:"add/:id",component:U}],z=function(){function t(){}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(n){return new(n||t)},imports:[[e.f.forChild(j)],e.f]}),t}(),G=i("ct+p"),J=i("PCNd"),$=function(){function t(){}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(n){return new(n||t)},imports:[[o.c,z,G.HomeModule,b.s,J.a,g.b,C.b,u.b,b.k,B.c]]}),t}()}}]);