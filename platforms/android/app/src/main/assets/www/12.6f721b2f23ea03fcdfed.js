(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7UCR":function(n,e,t){"use strict";t.r(e),t.d(e,"UserModule",(function(){return j}));var i=t("Valr"),a=t("DUip"),o=t("wHSu"),r=t("TYT/"),l=t("2yus"),c=t("JOp9"),s=t("2MiI"),u=t("A27j"),d=t("6BC6"),b=t("QJY3"),f=t("qSak"),p=t("o8Qb");function g(n,e){1&n&&r.Ob(0,"app-loading-block")}var m=function(n){return["/","user","add",n]};function h(n,e){if(1&n&&(r.Tb(0,"li",9),r.Tb(1,"div",10),r.Tb(2,"b"),r.Cc(3),r.Sb(),r.Tb(4,"small",11),r.Cc(5),r.Sb(),r.Sb(),r.Tb(6,"div"),r.Tb(7,"small"),r.Cc(8),r.Sb(),r.Sb(),r.Sb()),2&n){var t=e.$implicit;r.kc("routerLink",r.nc(4,m,null==t?null:t.id)),r.Bb(3),r.Ec("",null==t?null:t.name," "),r.Bb(2),r.Dc(null==t?null:t.level),r.Bb(3),r.Dc(null==t?null:t.address)}}function v(n,e){if(1&n&&(r.Tb(0,"ul"),r.Ac(1,h,9,6,"li",8),r.Sb()),2&n){var t=r.ec();r.Bb(1),r.kc("ngForOf",t.data)}}var S=function(){return["/","user","add"]},O=function(){function n(n,e){var t=this;this.rest=n,this.shared=e,this.faUser=o.l,this.faPlus=o.f,this.data=[],this.loading=!1,this.page=1,this.limit=9,this.src="",this.roundInnerHeight=function(n,e,t){return void 0===t&&(t=.02),parseInt(String(n+e))+parseInt(String(n+e))*t},this.search=function(n){t.data=[],n.length>2?(t.page=1,t.actualPage=null,t.load(["&src="+n])):(t.actualPage=null,t.page=1,t.load())},this.load=function(n){void 0===n&&(n=[]);var e=["users","?limit="+t.limit];t.page&&t.actualPage!==t.page&&!t.loading&&(e=["users?","limit="+t.limit+"&page="+t.page,""+n.join("")],t.loading=!0,t.rest.get(e.join("")).subscribe((function(n){return t.parseDate(n.data.data,n.data.next_page_url,n.data.from)}),(function(n){t.loading=!1})))},this.parseDate=function(n,e,i){void 0===n&&(n=[]),t.actualPage=i,t.loading=!1,t.page=t.shared.parsePageUrl(e),n.map((function(n){return t.data.push(n)}))}}return n.prototype.onScroll=function(){this.roundInnerHeight(window.innerHeight,window.scrollY)>parseInt(String(document.body.offsetHeight))&&this.load()},n.prototype.ngOnInit=function(){this.load()},n.\u0275fac=function(e){return new(e||n)(r.Nb(l.a),r.Nb(c.a))},n.\u0275cmp=r.Hb({type:n,selectors:[["app-list"]],hostBindings:function(n,e){1&n&&r.bc("scroll",(function(){return e.onScroll()}),!1,r.sc)},decls:11,vars:10,consts:[[3,"label","icon"],[1,"list-user","p-2","pl-3","pr-3"],[1,"text-right","mb-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"routerLink"],[3,"icon"],[1,"form-group"],["autocomplete","off","type","text","id","src","placeholder","Buscar...",1,"form-control","src-input",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"d-flex","justify-content-between"],[1,"text-muted"]],template:function(n,e){1&n&&(r.Ob(0,"app-header",0),r.fc(1,"translate"),r.Ob(2,"app-logged-user"),r.Tb(3,"div",1),r.Tb(4,"div",2),r.Tb(5,"button",3),r.Ob(6,"fa-icon",4),r.Sb(),r.Sb(),r.Tb(7,"div",5),r.Tb(8,"input",6),r.bc("ngModelChange",(function(n){return e.src=n}))("ngModelChange",(function(n){return e.search(n)})),r.Sb(),r.Sb(),r.Ac(9,g,1,0,"app-loading-block",7),r.Ac(10,v,2,1,"ul",7),r.Sb()),2&n&&(r.kc("label",r.gc(1,7,"HEADER.USER"))("icon",e.faUser),r.Bb(5),r.kc("routerLink",r.mc(9,S)),r.Bb(1),r.kc("icon",e.faPlus),r.Bb(2),r.kc("ngModel",e.src),r.Bb(1),r.kc("ngIf",e.loading),r.Bb(1),r.kc("ngIf",!e.loading))},directives:[s.a,u.a,a.d,d.a,b.c,b.n,b.p,i.k,f.a,i.j],pipes:[p.c],styles:[".list-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;font-size:.8rem;background-color:#fff}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem;margin-bottom:.5rem;border-bottom:1px solid #f4f4f4}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0}.src-input[_ngcontent-%COMP%]{border:0 solid #fff;border-radius:3px;font-size:.8rem;background-color:hsla(0,0%,100%,.45)}"]}),n}(),k=t("jioA"),T=t("cUzu"),B=t("hMSI"),C=t("zRhN"),E=t("JYfv"),M=t("YRkU");function A(n,e){1&n&&(r.Tb(0,"div",22),r.Cc(1),r.fc(2,"translate"),r.Sb()),2&n&&(r.Bb(1),r.Ec(" ",r.gc(2,1,"GENERAL.NOT_ALLOWED")," "))}function y(n,e){if(1&n&&(r.Tb(0,"option",23),r.Cc(1),r.Sb()),2&n){var t=e.$implicit;r.kc("value",null==t?null:t.value),r.Bb(1),r.Dc(null==t?null:t.name)}}function I(n,e){}function R(n,e){if(1&n&&r.Ob(0,"img",28),2&n){var t=r.ec().$implicit;r.kc("src",null==t?null:t.src,r.vc)}}function L(n,e){if(1&n&&r.Ob(0,"img",28),2&n){var t=r.ec().$implicit;r.kc("src",null==t?null:t.small,r.vc)}}var w=function(n){return{"image-loading":n}};function U(n,e){if(1&n){var t=r.Ub();r.Tb(0,"div",24),r.Tb(1,"span",25),r.bc("click",(function(){r.tc(t);var n=e.$implicit;return r.ec().removeImage(n)})),r.Ob(2,"fa-icon",26),r.Sb(),r.Ac(3,R,1,1,"img",27),r.Ac(4,L,1,1,"img",27),r.Sb()}if(2&n){var i=e.$implicit,a=r.ec();r.kc("ngClass",r.nc(4,w,null==i?null:i.loading)),r.Bb(2),r.kc("icon",a.faTimes),r.Bb(1),r.kc("ngIf",null==i?null:i.src),r.Bb(1),r.kc("ngIf",null==i?null:i.small)}}function D(n,e){if(1&n){var t=r.Ub();r.Tb(0,"div",29),r.Tb(1,"div",30),r.Tb(2,"button",31),r.fc(3,"translate"),r.Cc(4," ENVIAR "),r.Sb(),r.Sb(),r.Tb(5,"div",32),r.Tb(6,"button",33),r.bc("click",(function(){return r.tc(t),r.ec().trash()})),r.Ob(7,"fa-icon",26),r.Sb(),r.Sb(),r.Sb()}if(2&n){var i=r.ec();r.Bb(2),r.kc("appLoadingButton",i.loading)("dis",!i.form.valid)("label",r.gc(3,5,"GENERAL.LOADING")),r.Bb(4),r.kc("disabled",!i.form.valid),r.Bb(1),r.kc("icon",i.faTrash)}}var N=function(){return{standalone:!0}},P=function(){function n(n,e,t,i,a,r,l){var c=this;this.formBuilder=n,this.rest=e,this.router=t,this.shared=i,this.http=a,this.cookie=r,this.route=l,this.faUser=o.l,this.faHome=o.d,this.faDownload=o.c,this.faTrash=o.k,this.faCamera=o.a,this.faImage=o.e,this.faTimes=o.j,this.loading=!1,this.id=!1,this.images=[],this.adapter=new k.a(this.http,this.cookie),this.levels=[{name:"Admin",value:"admin",select:!1},{name:"Manager",value:"manager",select:!1},{name:"User",value:"user",select:!1}],this.onSubmit=function(){c.loading=!0,c.form.patchValue({extra:c.itemsAsObjects,images:c.images}),c.rest[c.id?"put":"post"]("users"+(c.id?"/"+c.id:""),c.form.value).subscribe((function(n){c.loading=!1,c.modalLink(n),c.router.navigate(["/","user"])}),(function(n){c.loading=!1}))},this.modalLink=function(n){try{var e=n.data.link.split("?"),t=window.location.origin+"/#/auth/confirmed/"+n.data.id+"?";t=""+t+e.reverse().find((function(n){return!0})),c.shared.alertHtml("Compartir",'<input class="form-control"  readonly value="'+t+'">')}catch(i){return null}},this.parseUser=function(){try{c.lvl=JSON.parse(c.cookie.get("user")).level}catch(n){return null}},this.load=function(n){void 0===n&&(n=!1),c.rest.get("users/"+c.id+(n?"?export=pdf":"")).subscribe((function(n){c.itemsAsObjects=c.shared.wrapperDataExtra(n.data),c.images=n.data.images,c.form.patchValue(n.data)}),(function(n){}))},this.trash=function(){c.shared.confirm("\xbfSeguro?","","OK").then((function(n){c.rest.delete("users/"+c.id).subscribe((function(){return c.router.navigate(["/","user"])}),(function(n){}))}))},this.report=function(){c.shared.confirm("Reporte","","OK").then((function(n){c.rest.get("users/"+c.id+"?export=pdf").subscribe((function(n){window.open(n.data.url)}),(function(n){}))}))},this.addImage=function(n){c.loading=!0,c.shared.toBase64(n.file).then((function(e){c.images.push({name:n.fileName,src:e,loading:!0})}))},this.uploadImage=function(n){c.loading=!1,c.images.forEach((function(e){n.fileName===e.name&&(e.online=JSON.parse(n.fileId),e.loading=!1,e.id=e.online.id)}))},this.uploadImageFail=function(n){c.loading=!1},this.removeImage=function(n){c.images=c.images.filter((function(e){return e.id!==n.id}))}}return n.prototype.ngOnInit=function(){var n=this;this.route.params.subscribe((function(e){n.id=e.id,n.load(),n.parseUser()})),this.form=this.formBuilder.group({name:["",b.u.required],email:["",[b.u.required,b.u.email]],level:["",b.u.required],extra:[""],images:[""],avatar:[""]})},n.\u0275fac=function(e){return new(e||n)(r.Nb(b.e),r.Nb(l.a),r.Nb(a.c),r.Nb(c.a),r.Nb(T.a),r.Nb(B.a),r.Nb(a.a))},n.\u0275cmp=r.Hb({type:n,selectors:[["app-add"]],decls:54,vars:46,consts:[["label","User",3,"icon"],[1,"edit-add-user","p-2","pl-2","pr-2","ml-3","mr-3"],["class","alert alert-info",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","form_name"],["type","text","formControlName","name","id","form_name","placeholder","",1,"form-control"],[1,"form-text","text-muted"],["for","form_email"],["type","email","formControlName","email","id","form_email","placeholder","",1,"form-control",3,"readOnly"],[3,"identifyBy","displayBy","placeholder","ngModel","ngModelOptions","ngModelChange"],["for","form_level"],["formControlName","level","id","form_level",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["itemTemplate",""],[1,"col-12","row","m-0","p-0"],["class","col-4 pl-0 pt-0 pb-1 pr-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-4","p-0"],[1,"customPicker",3,"adapter","itemTemplate","fileAdded","uploadSuccess","uploadFail"],[1,"dropzoneTemplate","text-center"],["size","2x",3,"icon"],["class","d-flex",4,"ngIf"],[1,"alert","alert-info"],[3,"value"],[1,"col-4","pl-0","pt-0","pb-1","pr-1",3,"ngClass"],[1,"icon-close",3,"click"],[3,"icon"],["class","img-gallery","alt","",3,"src",4,"ngIf"],["alt","",1,"img-gallery",3,"src"],[1,"d-flex"],[1,"w-75"],[1,"btn","btn-info","w-100",3,"appLoadingButton","dis","label"],[1,"w-25","pl-1"],["type","button",1,"btn","btn-danger","w-100",3,"disabled","click"]],template:function(n,e){if(1&n&&(r.Ob(0,"app-header",0),r.Ob(1,"app-logged-user"),r.Tb(2,"div",1),r.Ac(3,A,3,3,"div",2),r.Tb(4,"form",3),r.bc("ngSubmit",(function(){return e.onSubmit()})),r.Tb(5,"div",4),r.Tb(6,"label",5),r.Cc(7),r.fc(8,"translate"),r.Sb(),r.Ob(9,"input",6),r.Tb(10,"small",7),r.Cc(11),r.fc(12,"translate"),r.Sb(),r.Sb(),r.Tb(13,"div",4),r.Tb(14,"label",8),r.Cc(15),r.fc(16,"translate"),r.Sb(),r.Ob(17,"input",9),r.Tb(18,"small",7),r.Cc(19),r.fc(20,"translate"),r.Sb(),r.Sb(),r.Tb(21,"div",4),r.Tb(22,"label"),r.Cc(23),r.fc(24,"translate"),r.Sb(),r.Tb(25,"tag-input",10),r.bc("ngModelChange",(function(n){return e.itemsAsObjects=n})),r.Sb(),r.Tb(26,"small",7),r.Cc(27),r.fc(28,"translate"),r.Sb(),r.Sb(),r.Tb(29,"div",4),r.Tb(30,"label",11),r.Cc(31),r.fc(32,"translate"),r.Sb(),r.Tb(33,"select",12),r.Ac(34,y,2,2,"option",13),r.Sb(),r.Tb(35,"small",7),r.Cc(36),r.fc(37,"translate"),r.Sb(),r.Sb(),r.Tb(38,"div",4),r.Tb(39,"label"),r.Cc(40),r.fc(41,"translate"),r.Sb(),r.Ac(42,I,0,0,"ng-template",null,14,r.Bc),r.Tb(44,"div",15),r.Ac(45,U,5,6,"div",16),r.Tb(46,"div",17),r.Tb(47,"ngx-file-picker",18),r.bc("fileAdded",(function(n){return e.addImage(n)}))("uploadSuccess",(function(n){return e.uploadImage(n)}))("uploadFail",(function(n){return e.uploadImageFail(n)})),r.Tb(48,"div",19),r.Ob(49,"fa-icon",20),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(50,"small",7),r.Cc(51),r.fc(52,"translate"),r.Sb(),r.Sb(),r.Ac(53,D,8,7,"div",21),r.Sb(),r.Sb()),2&n){var t=r.rc(43);r.kc("icon",e.faUser),r.Bb(3),r.kc("ngIf","admin"!==e.lvl),r.Bb(1),r.kc("formGroup",e.form),r.Bb(3),r.Dc(r.gc(8,25,"USER.FORM.NAME")),r.Bb(4),r.Dc(r.gc(12,27,"USER.FORM.NAME_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(16,29,"USER.FORM.EMAIL")),r.Bb(2),r.kc("readOnly",e.id),r.Bb(2),r.Dc(r.gc(20,31,"USER.FORM.EMAIL_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(24,33,"USER.FORM.TAG")),r.Bb(2),r.kc("identifyBy","key")("displayBy","value")("placeholder","")("ngModel",e.itemsAsObjects)("ngModelOptions",r.mc(45,N)),r.Bb(2),r.Dc(r.gc(28,35,"USER.FORM.TAG_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(32,37,"USER.FORM.LEVEL")),r.Bb(3),r.kc("ngForOf",e.levels),r.Bb(2),r.Dc(r.gc(37,39,"USER.FORM.LEVEL_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(41,41,"USER.FORM.IMAGES")),r.Bb(5),r.kc("ngForOf",e.images),r.Bb(2),r.kc("adapter",e.adapter)("itemTemplate",t),r.Bb(2),r.kc("icon",e.faImage),r.Bb(2),r.Dc(r.gc(52,43,"USER.FORM.IMAGES_PLACEHOLDER")),r.Bb(2),r.kc("ngIf","admin"===e.lvl)}},directives:[s.a,u.a,i.k,b.w,b.o,b.j,b.c,b.n,b.h,C.a,b.p,b.t,i.j,E.b,d.a,b.q,b.v,i.i,M.a],pipes:[p.c],styles:[".edit-add-user[_ngcontent-%COMP%]{padding:0;list-style:none;font-size:.8rem;background-color:#fff}.form-control[_ngcontent-%COMP%]{border-radius:0;font-size:.8rem;background-color:#fafafa;border:0 solid #fff;border-bottom:1px solid #ddd}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #ff756b}.alert-info[_ngcontent-%COMP%]{padding:.35rem;font-size:.75rem;border-radius:3px}"]}),n}(),_=[{path:"",component:O},{path:"add",component:P},{path:"add/:id",component:P}],x=function(){function n(){}return n.\u0275mod=r.Lb({type:n}),n.\u0275inj=r.Kb({factory:function(e){return new(e||n)},imports:[[a.f.forChild(_)],a.f]}),n}(),F=t("ct+p"),H=t("PCNd"),j=function(){function n(){}return n.\u0275mod=r.Lb({type:n}),n.\u0275inj=r.Kb({factory:function(e){return new(e||n)},imports:[[i.c,C.b,H.a,x,F.HomeModule,p.b,b.s,b.k,d.b,E.c]]}),n}()}}]);