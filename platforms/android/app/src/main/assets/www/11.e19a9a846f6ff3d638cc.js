(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{kanD:function(t,n,e){"use strict";e.r(n),e.d(n,"StaffModule",(function(){return H}));var i=e("Valr"),a=e("DUip"),o=e("wHSu"),r=e("TYT/"),c=e("2yus"),l=e("JOp9"),s=e("2MiI"),b=e("A27j"),f=e("6BC6"),u=e("QJY3"),d=e("qSak"),p=e("o8Qb");function m(t,n){1&t&&r.Ob(0,"app-loading-block")}var g=function(t){return["/","staff","add",t]};function h(t,n){if(1&t&&(r.Tb(0,"li",10),r.Tb(1,"div",11),r.Tb(2,"b"),r.Cc(3),r.Sb(),r.Tb(4,"small",12),r.Cc(5),r.Sb(),r.Sb(),r.Tb(6,"div"),r.Tb(7,"small"),r.Cc(8),r.Sb(),r.Sb(),r.Tb(9,"div"),r.Tb(10,"small"),r.Cc(11),r.Sb(),r.Sb(),r.Sb()),2&t){var e=n.$implicit;r.kc("routerLink",r.nc(5,g,null==e?null:e.id)),r.Bb(3),r.Ec("",null==e?null:e.name," "),r.Bb(2),r.Dc(null==e?null:e.level),r.Bb(3),r.Dc(null==e?null:e.zone),r.Bb(3),r.Dc(null==e||null==e.institution?null:e.institution.name)}}function S(t,n){if(1&t&&(r.Tb(0,"ul"),r.Ac(1,h,12,7,"li",9),r.Sb()),2&t){var e=r.ec();r.Bb(1),r.kc("ngForOf",e.data)}}var T=function(){return["/","staff","add"]},O=function(){function t(t,n){var e=this;this.rest=t,this.shared=n,this.faUser=o.m,this.faDownload=o.d,this.faPlus=o.g,this.faUserNurse=o.n,this.data=[],this.loading=!1,this.page=1,this.limit=9,this.src="",this.roundInnerHeight=function(t,n,e){return void 0===e&&(e=.02),parseInt(String(t+n))+parseInt(String(t+n))*e},this.report=function(){e.shared.confirm("Reporte","","OK").then((function(t){e.rest.get("staff?export=pdf").subscribe((function(t){window.open(t.data.file)}),(function(t){}))}))},this.search=function(t){e.data=[],t.length>2?(e.page=1,e.actualPage=null,e.load(["&src="+t])):(e.actualPage=null,e.page=1,e.load())},this.load=function(t){void 0===t&&(t=[]);var n=["staff","?limit="+e.limit];e.page&&e.actualPage!==e.page&&!e.loading&&(n=["staff?","limit="+e.limit+"&page="+e.page,""+t.join("")],e.loading=!0,e.rest.get(n.join("")).subscribe((function(t){return e.parseDate(t.data.data,t.data.next_page_url,t.data.from)}),(function(t){e.loading=!1})))},this.parseDate=function(t,n,i){void 0===t&&(t=[]),e.actualPage=i,e.loading=!1,e.page=e.shared.parsePageUrl(n),t.map((function(t){return e.data.push(t)}))}}return t.prototype.onScroll=function(){this.roundInnerHeight(window.innerHeight,window.scrollY)>parseInt(String(document.body.offsetHeight))&&this.load()},t.prototype.ngOnInit=function(){this.load()},t.\u0275fac=function(n){return new(n||t)(r.Nb(c.a),r.Nb(l.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-list"]],hostBindings:function(t,n){1&t&&r.bc("scroll",(function(){return n.onScroll()}),!1,r.sc)},decls:16,vars:14,consts:[[3,"label","icon"],[1,"list-user","p-2","pl-3","pr-3"],[1,"d-flex","justify-content-between","mb-2","pl-1","pr-1"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[3,"icon"],[1,"btn","btn-outline-secondary","btn-sm",3,"routerLink"],[1,"form-group"],["autocomplete","off","type","text","id","src","placeholder","Buscar...",1,"form-control","src-input",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"d-flex","justify-content-between"],[1,"text-muted"]],template:function(t,n){1&t&&(r.Ob(0,"app-header",0),r.fc(1,"translate"),r.Ob(2,"app-logged-user"),r.Tb(3,"div",1),r.Tb(4,"div",2),r.Tb(5,"button",3),r.bc("click",(function(){return n.report()})),r.Ob(6,"fa-icon",4),r.Tb(7,"span"),r.Cc(8),r.fc(9,"translate"),r.Sb(),r.Sb(),r.Tb(10,"button",5),r.Ob(11,"fa-icon",4),r.Sb(),r.Sb(),r.Tb(12,"div",6),r.Tb(13,"input",7),r.bc("ngModelChange",(function(t){return n.src=t}))("ngModelChange",(function(t){return n.search(t)})),r.Sb(),r.Sb(),r.Ac(14,m,1,0,"app-loading-block",8),r.Ac(15,S,2,1,"ul",8),r.Sb()),2&t&&(r.kc("label",r.gc(1,9,"HEADER.STAFF"))("icon",n.faUserNurse),r.Bb(6),r.kc("icon",n.faDownload),r.Bb(2),r.Dc(r.gc(9,11,"INSTITUTIONS.REPORT")),r.Bb(2),r.kc("routerLink",r.mc(13,T)),r.Bb(1),r.kc("icon",n.faPlus),r.Bb(2),r.kc("ngModel",n.src),r.Bb(1),r.kc("ngIf",n.loading),r.Bb(1),r.kc("ngIf",!n.loading))},directives:[s.a,b.a,f.a,a.d,u.c,u.n,u.p,i.k,d.a,i.j],pipes:[p.c],styles:[".list-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;font-size:.8rem;background-color:#fff}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem;margin-bottom:.5rem;border-bottom:1px solid #f4f4f4}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0}.src-input[_ngcontent-%COMP%]{border:0 solid #fff;border-radius:3px;font-size:.8rem;background-color:hsla(0,0%,100%,.45)}"]}),t}(),F=e("jioA"),v=e("cUzu"),A=e("hMSI"),C=e("zRhN"),k=e("JYfv"),B=e("YRkU");function M(t,n){if(1&t&&(r.Tb(0,"option",34),r.Cc(1),r.Sb()),2&t){var e=n.$implicit;r.kc("value",null==e?null:e.id),r.Bb(1),r.Dc(null==e?null:e.name)}}function D(t,n){}function _(t,n){if(1&t&&r.Ob(0,"img",38),2&t){var e=r.ec().$implicit;r.kc("src",null==e?null:e.src,r.vc)}}function E(t,n){if(1&t&&r.Ob(0,"img",38),2&t){var e=r.ec().$implicit;r.kc("src",null==e?null:e.small,r.vc)}}var I=function(t){return{"image-loading":t}};function N(t,n){if(1&t){var e=r.Ub();r.Tb(0,"div",35),r.Tb(1,"span",36),r.bc("click",(function(){r.tc(e);var t=n.$implicit;return r.ec().removeImage(t)})),r.Ob(2,"fa-icon",33),r.Sb(),r.Ac(3,_,1,1,"img",37),r.Ac(4,E,1,1,"img",37),r.Sb()}if(2&t){var i=n.$implicit,a=r.ec();r.kc("ngClass",r.nc(4,I,null==i?null:i.loading)),r.Bb(2),r.kc("icon",a.faTimes),r.Bb(1),r.kc("ngIf",null==i?null:i.src),r.Bb(1),r.kc("ngIf",null==i?null:i.small)}}var R=function(){return{standalone:!0}},y=function(){function t(t,n,e,i,a,r,c){var l=this;this.formBuilder=t,this.rest=n,this.router=e,this.shared=i,this.http=a,this.cookie=r,this.route=c,this.faUserNurse=o.n,this.faHome=o.e,this.faDownload=o.d,this.faTrash=o.l,this.faCamera=o.a,this.faImage=o.f,this.faTimes=o.k,this.loading=!1,this.id=!1,this.images=[],this.adapter=new F.a(this.http,this.cookie),this.institutions=[],this.onSubmit=function(){l.loading=!0,l.form.patchValue({extra:l.itemsAsObjects,images:l.images}),l.rest[l.id?"put":"post"]("staff"+(l.id?"/"+l.id:""),l.form.value).subscribe((function(t){l.loading=!1,l.router.navigate(["/","staff"])}),(function(t){l.loading=!1}))},this.load=function(t){void 0===t&&(t=!1),l.rest.get("staff/"+l.id+(t?"?export=pdf":"")).subscribe((function(t){l.itemsAsObjects=l.shared.wrapperDataExtra(t.data),l.images=t.data.images,l.form.patchValue(t.data)}),(function(t){}))},this.trash=function(){l.shared.confirm("\xbfSeguro?","","OK").then((function(t){l.rest.delete("staff/"+l.id).subscribe((function(){return l.router.navigate(["/","staff"])}),(function(t){}))}))},this.report=function(){l.shared.confirm("Reporte","","OK").then((function(t){l.rest.get("staff/"+l.id+"?export=pdf").subscribe((function(t){window.open(t.data.url)}),(function(t){}))}))},this.addImage=function(t){l.loading=!0,l.shared.toBase64(t.file).then((function(n){l.images.push({name:t.fileName,src:n,loading:!0})}))},this.uploadImage=function(t){l.loading=!1,l.images.forEach((function(n){t.fileName===n.name&&(n.online=JSON.parse(t.fileId),n.loading=!1,n.id=n.online.id)}))},this.uploadImageFail=function(t){l.loading=!1},this.removeImage=function(t){l.images=l.images.filter((function(n){return n.id!==t.id}))},this.loadInstitutions=function(){l.rest.get("institutions?limit=10000").subscribe((function(t){l.institutions=t.data.data}),(function(t){}))}}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe((function(n){t.id=n.id,t.load(),t.loadInstitutions()})),this.form=this.formBuilder.group({name:["",u.u.required],last_name:["",u.u.required],phone:["",u.u.required],address:["",u.u.required],age:["",u.u.required],email:["",[u.u.required,u.u.email]],extra:[""],images:[""],institutions_id:["",u.u.required],avatar:[""]})},t.\u0275fac=function(n){return new(n||t)(r.Nb(u.e),r.Nb(c.a),r.Nb(a.c),r.Nb(l.a),r.Nb(v.a),r.Nb(A.a),r.Nb(a.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-add"]],decls:93,vars:77,consts:[[3,"label","icon"],[1,"edit-add-user","p-2","pl-2","pr-2","ml-3","mr-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","form_name"],["type","text","formControlName","name","id","form_name","placeholder","",1,"form-control"],[1,"form-text","text-muted"],["for","form_last_name"],["type","text","formControlName","last_name","id","form_last_name","placeholder","",1,"form-control"],["for","form_phone"],["type","phone","formControlName","phone","id","form_phone","placeholder","",1,"form-control"],["for","form_email"],["type","email","formControlName","email","id","form_email","placeholder","",1,"form-control"],["for","form_age"],["type","number","formControlName","age","id","form_age","placeholder","",1,"form-control"],["for","form_address"],["type","text","formControlName","address","id","form_address","placeholder","",1,"form-control"],[3,"identifyBy","displayBy","placeholder","ngModel","ngModelOptions","ngModelChange"],["for","form_institutions"],["formControlName","institutions_id","id","form_institutions",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["itemTemplate",""],[1,"col-12","row","m-0","p-0"],["class","col-4 pl-0 pt-0 pb-1 pr-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-4","p-0"],[1,"customPicker",3,"adapter","itemTemplate","fileAdded","uploadSuccess","uploadFail"],[1,"dropzoneTemplate","text-center"],["size","2x",3,"icon"],[1,"d-flex"],[1,"w-75"],[1,"btn","btn-info","w-100",3,"appLoadingButton","dis","label"],[1,"w-25","pl-1"],["type","button",1,"btn","btn-danger","w-100",3,"disabled","click"],[3,"icon"],[3,"value"],[1,"col-4","pl-0","pt-0","pb-1","pr-1",3,"ngClass"],[1,"icon-close",3,"click"],["class","img-gallery","alt","",3,"src",4,"ngIf"],["alt","",1,"img-gallery",3,"src"]],template:function(t,n){if(1&t&&(r.Ob(0,"app-header",0),r.fc(1,"translate"),r.Ob(2,"app-logged-user"),r.Tb(3,"div",1),r.Tb(4,"form",2),r.bc("ngSubmit",(function(){return n.onSubmit()})),r.Tb(5,"div",3),r.Tb(6,"label",4),r.Cc(7),r.fc(8,"translate"),r.Sb(),r.Ob(9,"input",5),r.Tb(10,"small",6),r.Cc(11),r.fc(12,"translate"),r.Sb(),r.Sb(),r.Tb(13,"div",3),r.Tb(14,"label",7),r.Cc(15),r.fc(16,"translate"),r.Sb(),r.Ob(17,"input",8),r.Tb(18,"small",6),r.Cc(19),r.fc(20,"translate"),r.Sb(),r.Sb(),r.Tb(21,"div",3),r.Tb(22,"label",9),r.Cc(23),r.fc(24,"translate"),r.Sb(),r.Ob(25,"input",10),r.Tb(26,"small",6),r.Cc(27),r.fc(28,"translate"),r.Sb(),r.Sb(),r.Tb(29,"div",3),r.Tb(30,"label",11),r.Cc(31),r.fc(32,"translate"),r.Sb(),r.Ob(33,"input",12),r.Tb(34,"small",6),r.Cc(35),r.fc(36,"translate"),r.Sb(),r.Sb(),r.Tb(37,"div",3),r.Tb(38,"label",13),r.Cc(39),r.fc(40,"translate"),r.Sb(),r.Ob(41,"input",14),r.Tb(42,"small",6),r.Cc(43),r.fc(44,"translate"),r.Sb(),r.Sb(),r.Tb(45,"div",3),r.Tb(46,"label",15),r.Cc(47),r.fc(48,"translate"),r.Sb(),r.Ob(49,"input",16),r.Tb(50,"small",6),r.Cc(51),r.fc(52,"translate"),r.Sb(),r.Sb(),r.Tb(53,"div",3),r.Tb(54,"label"),r.Cc(55),r.fc(56,"translate"),r.Sb(),r.Tb(57,"tag-input",17),r.bc("ngModelChange",(function(t){return n.itemsAsObjects=t})),r.Sb(),r.Tb(58,"small",6),r.Cc(59),r.fc(60,"translate"),r.Sb(),r.Sb(),r.Tb(61,"div",3),r.Tb(62,"label",18),r.Cc(63),r.fc(64,"translate"),r.Sb(),r.Tb(65,"select",19),r.Ac(66,M,2,2,"option",20),r.Sb(),r.Tb(67,"small",6),r.Cc(68),r.fc(69,"translate"),r.Sb(),r.Sb(),r.Tb(70,"div",3),r.Tb(71,"label"),r.Cc(72),r.fc(73,"translate"),r.Sb(),r.Ac(74,D,0,0,"ng-template",null,21,r.Bc),r.Tb(76,"div",22),r.Ac(77,N,5,6,"div",23),r.Tb(78,"div",24),r.Tb(79,"ngx-file-picker",25),r.bc("fileAdded",(function(t){return n.addImage(t)}))("uploadSuccess",(function(t){return n.uploadImage(t)}))("uploadFail",(function(t){return n.uploadImageFail(t)})),r.Tb(80,"div",26),r.Ob(81,"fa-icon",27),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(82,"small",6),r.Cc(83),r.fc(84,"translate"),r.Sb(),r.Sb(),r.Tb(85,"div",28),r.Tb(86,"div",29),r.Tb(87,"button",30),r.fc(88,"translate"),r.Cc(89," ENVIAR "),r.Sb(),r.Sb(),r.Tb(90,"div",31),r.Tb(91,"button",32),r.bc("click",(function(){return n.trash()})),r.Ob(92,"fa-icon",33),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&t){var e=r.rc(75);r.kc("label",r.gc(1,36,"HEADER.STAFF"))("icon",n.faUserNurse),r.Bb(4),r.kc("formGroup",n.form),r.Bb(3),r.Dc(r.gc(8,38,"STAFF.FORM.NAME")),r.Bb(4),r.Dc(r.gc(12,40,"STAFF.FORM.NAME_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(16,42,"STAFF.FORM.LAST_NAME")),r.Bb(4),r.Dc(r.gc(20,44,"STAFF.FORM.LAST_NAME_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(24,46,"STAFF.FORM.PHONE")),r.Bb(4),r.Dc(r.gc(28,48,"STAFF.FORM.PHONE_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(32,50,"STAFF.FORM.EMAIL")),r.Bb(4),r.Dc(r.gc(36,52,"STAFF.FORM.EMAIL_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(40,54,"STAFF.FORM.AGE")),r.Bb(4),r.Dc(r.gc(44,56,"STAFF.FORM.AGE_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(48,58,"STAFF.FORM.ADDRESS")),r.Bb(4),r.Dc(r.gc(52,60,"STAFF.FORM.ADDRESS_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(56,62,"STAFF.FORM.TAG")),r.Bb(2),r.kc("identifyBy","key")("displayBy","value")("placeholder","")("ngModel",n.itemsAsObjects)("ngModelOptions",r.mc(76,R)),r.Bb(2),r.Dc(r.gc(60,64,"STAFF.FORM.TAG_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(64,66,"STAFF.FORM.INSTITUTIONS")),r.Bb(3),r.kc("ngForOf",n.institutions),r.Bb(2),r.Dc(r.gc(69,68,"STAFF.FORM.INSTITUTIONS_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(73,70,"STAFF.FORM.IMAGES")),r.Bb(5),r.kc("ngForOf",n.images),r.Bb(2),r.kc("adapter",n.adapter)("itemTemplate",e),r.Bb(2),r.kc("icon",n.faImage),r.Bb(2),r.Dc(r.gc(84,72,"STAFF.FORM.IMAGES_PLACEHOLDER")),r.Bb(4),r.kc("appLoadingButton",n.loading)("dis",!n.form.valid)("label",r.gc(88,74,"GENERAL.LOADING")),r.Bb(4),r.kc("disabled",!n.form.valid),r.Bb(1),r.kc("icon",n.faTrash)}},directives:[s.a,b.a,u.w,u.o,u.j,u.c,u.n,u.h,u.r,C.a,u.p,u.t,i.j,k.b,f.a,B.a,u.q,u.v,i.i,i.k],pipes:[p.c],styles:[".edit-add-user[_ngcontent-%COMP%]{padding:0;list-style:none;font-size:.8rem;background-color:#fff}.form-control[_ngcontent-%COMP%]{border-radius:0;font-size:.8rem;background-color:#fafafa;border:0 solid #fff;border-bottom:1px solid #ddd}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #ff756b}.alert-info[_ngcontent-%COMP%]{padding:.35rem;font-size:.75rem;border-radius:3px}"]}),t}(),L=[{path:"",component:O},{path:"add",component:y},{path:"add/:id",component:y}],w=function(){function t(){}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(n){return new(n||t)},imports:[[a.f.forChild(L)],a.f]}),t}(),P=e("PCNd"),x=e("ct+p"),H=function(){function t(){}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(n){return new(n||t)},imports:[[i.c,C.b,P.a,w,x.HomeModule,p.b,u.s,u.k,f.b,k.c]]}),t}()}}]);