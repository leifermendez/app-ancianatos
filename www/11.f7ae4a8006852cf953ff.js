(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{kanD:function(t,n,e){"use strict";e.r(n),e.d(n,"StaffModule",(function(){return U}));var i=e("Valr"),a=e("DUip"),o=e("wHSu"),r=e("TYT/"),c=e("2yus"),l=e("JOp9"),s=e("2MiI"),b=e("A27j"),f=e("6BC6"),d=e("QJY3"),u=e("qSak"),m=e("o8Qb");function p(t,n){1&t&&r.Ob(0,"app-loading-block")}var g=function(t){return["/","staff","add",t]};function h(t,n){if(1&t&&(r.Tb(0,"li",10),r.Tb(1,"div",11),r.Tb(2,"b"),r.Cc(3),r.Sb(),r.Tb(4,"small",12),r.Cc(5),r.Sb(),r.Sb(),r.Tb(6,"div"),r.Tb(7,"small"),r.Cc(8),r.Sb(),r.Sb(),r.Tb(9,"div"),r.Tb(10,"small"),r.Cc(11),r.Sb(),r.Sb(),r.Sb()),2&t){var e=n.$implicit;r.kc("routerLink",r.nc(5,g,null==e?null:e.id)),r.Bb(3),r.Ec("",null==e?null:e.name," "),r.Bb(2),r.Dc(null==e?null:e.level),r.Bb(3),r.Dc(null==e?null:e.zone),r.Bb(3),r.Dc(null==e||null==e.institution?null:e.institution.name)}}function S(t,n){if(1&t&&(r.Tb(0,"ul"),r.Ac(1,h,12,7,"li",9),r.Sb()),2&t){var e=r.ec();r.Bb(1),r.kc("ngForOf",e.data)}}var T=function(){return["/","staff","add"]},O=function(){function t(t,n){var e=this;this.rest=t,this.shared=n,this.faUser=o.m,this.faDownload=o.d,this.faPlus=o.g,this.faUserNurse=o.n,this.data=[],this.loading=!1,this.page=1,this.limit=9,this.src="",this.roundInnerHeight=function(t,n,e){return void 0===e&&(e=.02),parseInt(String(t+n))+parseInt(String(t+n))*e},this.report=function(){e.shared.confirm("Reporte","","OK").then((function(t){e.rest.get("staff?export=pdf").subscribe((function(t){window.open(t.data.file)}),(function(t){}))}))},this.search=function(t){e.data=[],t.length>2?(e.page=1,e.actualPage=null,e.load(["&src="+t])):(e.actualPage=null,e.page=1,e.load())},this.load=function(t){void 0===t&&(t=[]);var n=["staff","?limit="+e.limit];e.page&&e.actualPage!==e.page&&!e.loading&&(n=["staff?","limit="+e.limit+"&page="+e.page,""+t.join("")],e.loading=!0,e.rest.get(n.join("")).subscribe((function(t){return e.parseDate(t.data.data,t.data.next_page_url,t.data.from)}),(function(t){e.loading=!1})))},this.parseDate=function(t,n,i){void 0===t&&(t=[]),e.actualPage=i,e.loading=!1,e.page=e.shared.parsePageUrl(n),t.map((function(t){return e.data.push(t)}))}}return t.prototype.onScroll=function(){this.roundInnerHeight(window.innerHeight,window.scrollY)>parseInt(String(document.body.offsetHeight))&&this.load()},t.prototype.ngOnInit=function(){this.load()},t.\u0275fac=function(n){return new(n||t)(r.Nb(c.a),r.Nb(l.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-list"]],hostBindings:function(t,n){1&t&&r.bc("scroll",(function(){return n.onScroll()}),!1,r.sc)},decls:16,vars:14,consts:[[3,"label","icon"],[1,"list-user","p-2","pl-3","pr-3"],[1,"d-flex","justify-content-between","mb-2","pl-1","pr-1"],[1,"btn","btn-outline-info","btn-sm",3,"click"],[3,"icon"],[1,"btn","btn-outline-secondary","btn-sm",3,"routerLink"],[1,"form-group"],["autocomplete","off","type","text","id","src","placeholder","Buscar...",1,"form-control","src-input",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"d-flex","justify-content-between"],[1,"text-muted"]],template:function(t,n){1&t&&(r.Ob(0,"app-header",0),r.fc(1,"translate"),r.Ob(2,"app-logged-user"),r.Tb(3,"div",1),r.Tb(4,"div",2),r.Tb(5,"button",3),r.bc("click",(function(){return n.report()})),r.Ob(6,"fa-icon",4),r.Tb(7,"span"),r.Cc(8),r.fc(9,"translate"),r.Sb(),r.Sb(),r.Tb(10,"button",5),r.Ob(11,"fa-icon",4),r.Sb(),r.Sb(),r.Tb(12,"div",6),r.Tb(13,"input",7),r.bc("ngModelChange",(function(t){return n.src=t}))("ngModelChange",(function(t){return n.search(t)})),r.Sb(),r.Sb(),r.Ac(14,p,1,0,"app-loading-block",8),r.Ac(15,S,2,1,"ul",8),r.Sb()),2&t&&(r.kc("label",r.gc(1,9,"HEADER.STAFF"))("icon",n.faUserNurse),r.Bb(6),r.kc("icon",n.faDownload),r.Bb(2),r.Dc(r.gc(9,11,"INSTITUTIONS.REPORT")),r.Bb(2),r.kc("routerLink",r.mc(13,T)),r.Bb(1),r.kc("icon",n.faPlus),r.Bb(2),r.kc("ngModel",n.src),r.Bb(1),r.kc("ngIf",n.loading),r.Bb(1),r.kc("ngIf",!n.loading))},directives:[s.a,b.a,f.a,a.d,d.c,d.n,d.p,i.k,u.a,i.j],pipes:[m.c],styles:[".list-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;font-size:.8rem;background-color:#fff}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem;margin-bottom:.5rem;border-bottom:1px solid #f4f4f4}.list-user[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0}.src-input[_ngcontent-%COMP%]{border:0 solid #fff;border-radius:3px;font-size:.8rem;background-color:hsla(0,0%,100%,.45)}"]}),t}(),F=e("jioA"),v=e("cUzu"),A=e("hMSI"),C=e("2iZp"),B=e("zRhN"),D=e("JYfv"),k=e("YRkU");function M(t,n){if(1&t&&(r.Tb(0,"option",37),r.Cc(1),r.Sb()),2&t){var e=n.$implicit;r.kc("value",null==e?null:e.value),r.Bb(1),r.Dc(null==e?null:e.name)}}function _(t,n){if(1&t&&(r.Tb(0,"option",37),r.Cc(1),r.Sb()),2&t){var e=n.$implicit;r.kc("value",null==e?null:e.id),r.Bb(1),r.Dc(null==e?null:e.name)}}function E(t,n){}function R(t,n){if(1&t&&r.Ob(0,"img",41),2&t){var e=r.ec().$implicit;r.kc("src",null==e?null:e.src,r.vc)}}function N(t,n){if(1&t&&r.Ob(0,"img",41),2&t){var e=r.ec().$implicit;r.kc("src",null==e?null:e.small,r.vc)}}var I=function(t){return{"image-loading":t}};function y(t,n){if(1&t){var e=r.Ub();r.Tb(0,"div",38),r.Tb(1,"span",39),r.bc("click",(function(){r.tc(e);var t=n.$implicit;return r.ec().removeImage(t)})),r.Ob(2,"fa-icon",36),r.Sb(),r.Ac(3,R,1,1,"img",40),r.Ac(4,N,1,1,"img",40),r.Sb()}if(2&t){var i=n.$implicit,a=r.ec();r.kc("ngClass",r.nc(4,I,null==i?null:i.loading)),r.Bb(2),r.kc("icon",a.faTimes),r.Bb(1),r.kc("ngIf",null==i?null:i.src),r.Bb(1),r.kc("ngIf",null==i?null:i.small)}}var L=function(){return{standalone:!0}},P=function(){function t(t,n,e,i,a,r,c,l){var s=this;this.formBuilder=t,this.rest=n,this.router=e,this.shared=i,this.http=a,this.cookie=r,this.auth=c,this.route=l,this.faUserNurse=o.n,this.faHome=o.e,this.faDownload=o.d,this.faTrash=o.l,this.faCamera=o.a,this.faImage=o.f,this.faTimes=o.k,this.loading=!1,this.id=!1,this.images=[],this.adapter=new F.a(this.http,this.cookie),this.institutions=[],this.gender=[{name:"Masculino",value:"m"},{name:"Femenino",value:"f"}],this.onSubmit=function(){s.loading=!0,s.form.patchValue({extra:s.itemsAsObjects,images:s.images}),s.rest[s.id?"put":"post"]("staff"+(s.id?"/"+s.id:""),s.form.value).subscribe((function(t){s.loading=!1,s.router.navigate(["/","staff"])}),(function(t){s.loading=!1}))},this.load=function(t){void 0===t&&(t=!1),s.rest.get("staff/"+s.id+(t?"?export=pdf":"")).subscribe((function(t){s.itemsAsObjects=s.shared.wrapperDataExtra(t.data),s.images=t.data.images,s.form.patchValue(t.data)}),(function(t){}))},this.trash=function(){s.shared.confirm("\xbfSeguro?","","OK").then((function(t){s.rest.delete("staff/"+s.id).subscribe((function(){return s.router.navigate(["/","staff"])}),(function(t){}))}))},this.report=function(){s.shared.confirm("Reporte","","OK").then((function(t){s.rest.get("staff/"+s.id+"?export=pdf").subscribe((function(t){window.open(t.data.url)}),(function(t){}))}))},this.addImage=function(t){s.loading=!0,s.shared.toBase64(t.file).then((function(n){s.images.push({name:t.fileName,src:n,loading:!0})}))},this.uploadImage=function(t){s.loading=!1,s.images.forEach((function(n){t.fileName===n.name&&(n.online=JSON.parse(t.fileId),n.loading=!1,n.id=n.online.id)}))},this.uploadImageFail=function(t){s.loading=!1},this.removeImage=function(t){s.images=s.images.filter((function(n){return n.id!==t.id}))},this.loadInstitutions=function(){var t=s.auth.getUser();s.rest.get("institutions?limit=10000&filters=id,=,"+t.institutions_id).subscribe((function(t){s.institutions=t.data.data}),(function(t){}))}}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe((function(n){t.id=n.id,t.load(),t.loadInstitutions()})),this.form=this.formBuilder.group({name:["",d.u.required],last_name:["",d.u.required],phone:["",d.u.required],address:["",d.u.required],age:["",d.u.required],email:["",[d.u.required,d.u.email]],addressMore:[""],gender:[""],extra:[""],images:[""],institutions_id:["",d.u.required],avatar:[""]})},t.\u0275fac=function(n){return new(n||t)(r.Nb(d.e),r.Nb(c.a),r.Nb(a.c),r.Nb(l.a),r.Nb(v.a),r.Nb(A.a),r.Nb(C.a),r.Nb(a.a))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-add"]],decls:110,vars:91,consts:[[3,"label","icon"],[1,"edit-add-user","p-2","pl-2","pr-2","ml-3","mr-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","form_name"],["type","text","formControlName","name","id","form_name","placeholder","",1,"form-control"],[1,"form-text","text-muted"],["for","form_last_name"],["type","text","formControlName","last_name","id","form_last_name","placeholder","",1,"form-control"],["for","form_phone"],["type","phone","formControlName","phone","id","form_phone","placeholder","",1,"form-control"],["for","form_email"],["type","email","formControlName","email","id","form_email","placeholder","",1,"form-control"],["for","form_age"],["type","number","formControlName","age","id","form_age","placeholder","",1,"form-control"],["type","phone","formControlName","address","id","form_address","placeholder","",1,"form-control"],["for","form_address_1"],["type","text","formControlName","addressMore","id","form_address_1","placeholder","",1,"form-control"],[3,"identifyBy","secondaryPlaceholder","displayBy","placeholder","ngModel","ngModelOptions","ngModelChange"],["for","form_gender"],["formControlName","gender","id","form_gender",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","form_institutions"],["formControlName","institutions_id","id","form_institutions",1,"form-control"],["itemTemplate",""],[1,"col-12","row","m-0","p-0"],["class","col-4 pl-0 pt-0 pb-1 pr-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-4","p-0"],[1,"customPicker",3,"adapter","itemTemplate","fileAdded","uploadSuccess","uploadFail"],[1,"dropzoneTemplate","text-center"],["size","2x",3,"icon"],[1,"d-flex"],[1,"w-75"],[1,"btn","btn-info","w-100",3,"appLoadingButton","dis","label"],[1,"w-25","pl-1"],["type","button",1,"btn","btn-danger","w-100",3,"disabled","click"],[3,"icon"],[3,"value"],[1,"col-4","pl-0","pt-0","pb-1","pr-1",3,"ngClass"],[1,"icon-close",3,"click"],["class","img-gallery","alt","",3,"src",4,"ngIf"],["alt","",1,"img-gallery",3,"src"]],template:function(t,n){if(1&t&&(r.Ob(0,"app-header",0),r.fc(1,"translate"),r.Ob(2,"app-logged-user"),r.Tb(3,"div",1),r.Tb(4,"form",2),r.bc("ngSubmit",(function(){return n.onSubmit()})),r.Tb(5,"div",3),r.Tb(6,"label",4),r.Cc(7),r.fc(8,"translate"),r.Sb(),r.Ob(9,"input",5),r.Tb(10,"small",6),r.Cc(11),r.fc(12,"translate"),r.Sb(),r.Sb(),r.Tb(13,"div",3),r.Tb(14,"label",7),r.Cc(15),r.fc(16,"translate"),r.Sb(),r.Ob(17,"input",8),r.Tb(18,"small",6),r.Cc(19),r.fc(20,"translate"),r.Sb(),r.Sb(),r.Tb(21,"div",3),r.Tb(22,"label",9),r.Cc(23),r.fc(24,"translate"),r.Sb(),r.Ob(25,"input",10),r.Tb(26,"small",6),r.Cc(27),r.fc(28,"translate"),r.Sb(),r.Sb(),r.Tb(29,"div",3),r.Tb(30,"label",11),r.Cc(31),r.fc(32,"translate"),r.Sb(),r.Ob(33,"input",12),r.Tb(34,"small",6),r.Cc(35),r.fc(36,"translate"),r.Sb(),r.Sb(),r.Tb(37,"div",3),r.Tb(38,"label",13),r.Cc(39),r.fc(40,"translate"),r.Sb(),r.Ob(41,"input",14),r.Tb(42,"small",6),r.Cc(43),r.fc(44,"translate"),r.Sb(),r.Sb(),r.Tb(45,"div",3),r.Tb(46,"label",9),r.Cc(47),r.fc(48,"translate"),r.Sb(),r.Ob(49,"input",15),r.Tb(50,"small",6),r.Cc(51),r.fc(52,"translate"),r.Sb(),r.Sb(),r.Tb(53,"div",3),r.Tb(54,"label",16),r.Cc(55),r.fc(56,"translate"),r.Sb(),r.Ob(57,"input",17),r.Tb(58,"small",6),r.Cc(59),r.fc(60,"translate"),r.Sb(),r.Sb(),r.Tb(61,"div",3),r.Tb(62,"label"),r.Cc(63),r.fc(64,"translate"),r.Sb(),r.Tb(65,"tag-input",18),r.bc("ngModelChange",(function(t){return n.itemsAsObjects=t})),r.Sb(),r.Tb(66,"small",6),r.Cc(67),r.fc(68,"translate"),r.Sb(),r.Sb(),r.Tb(69,"div",3),r.Tb(70,"label",19),r.Cc(71),r.fc(72,"translate"),r.Sb(),r.Tb(73,"select",20),r.Ac(74,M,2,2,"option",21),r.Sb(),r.Tb(75,"small",6),r.Cc(76),r.fc(77,"translate"),r.Sb(),r.Sb(),r.Tb(78,"div",3),r.Tb(79,"label",22),r.Cc(80),r.fc(81,"translate"),r.Sb(),r.Tb(82,"select",23),r.Ac(83,_,2,2,"option",21),r.Sb(),r.Tb(84,"small",6),r.Cc(85),r.fc(86,"translate"),r.Sb(),r.Sb(),r.Tb(87,"div",3),r.Tb(88,"label"),r.Cc(89),r.fc(90,"translate"),r.Sb(),r.Ac(91,E,0,0,"ng-template",null,24,r.Bc),r.Tb(93,"div",25),r.Ac(94,y,5,6,"div",26),r.Tb(95,"div",27),r.Tb(96,"ngx-file-picker",28),r.bc("fileAdded",(function(t){return n.addImage(t)}))("uploadSuccess",(function(t){return n.uploadImage(t)}))("uploadFail",(function(t){return n.uploadImageFail(t)})),r.Tb(97,"div",29),r.Ob(98,"fa-icon",30),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Tb(99,"small",6),r.Cc(100),r.fc(101,"translate"),r.Sb(),r.Sb(),r.Tb(102,"div",31),r.Tb(103,"div",32),r.Tb(104,"button",33),r.fc(105,"translate"),r.Cc(106," ENVIAR "),r.Sb(),r.Sb(),r.Tb(107,"div",34),r.Tb(108,"button",35),r.bc("click",(function(){return n.trash()})),r.Ob(109,"fa-icon",36),r.Sb(),r.Sb(),r.Sb(),r.Sb(),r.Sb()),2&t){var e=r.rc(92);r.kc("label",r.gc(1,42,"HEADER.STAFF"))("icon",n.faUserNurse),r.Bb(4),r.kc("formGroup",n.form),r.Bb(3),r.Dc(r.gc(8,44,"STAFF.FORM.NAME")),r.Bb(4),r.Dc(r.gc(12,46,"STAFF.FORM.NAME_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(16,48,"STAFF.FORM.LAST_NAME")),r.Bb(4),r.Dc(r.gc(20,50,"STAFF.FORM.LAST_NAME_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(24,52,"STAFF.FORM.PHONE")),r.Bb(4),r.Dc(r.gc(28,54,"STAFF.FORM.PHONE_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(32,56,"STAFF.FORM.EMAIL")),r.Bb(4),r.Dc(r.gc(36,58,"STAFF.FORM.EMAIL_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(40,60,"STAFF.FORM.AGE")),r.Bb(4),r.Dc(r.gc(44,62,"STAFF.FORM.AGE_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(48,64,"STAFF.FORM.ADDRESS")),r.Bb(4),r.Dc(r.gc(52,66,"STAFF.FORM.ADDRESS_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(56,68,"STAFF.FORM.ADDRESS_TWO")),r.Bb(4),r.Dc(r.gc(60,70,"STAFF.FORM.ADDRESS_TWO_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(64,72,"STAFF.FORM.TAG")),r.Bb(2),r.kc("identifyBy","key")("secondaryPlaceholder","")("displayBy","value")("placeholder","")("ngModel",n.itemsAsObjects)("ngModelOptions",r.mc(90,L)),r.Bb(2),r.Dc(r.gc(68,74,"STAFF.FORM.TAG_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(72,76,"STAFF.FORM.GENDER")),r.Bb(3),r.kc("ngForOf",n.gender),r.Bb(2),r.Dc(r.gc(77,78,"STAFF.FORM.GENDER_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(81,80,"STAFF.FORM.INSTITUTIONS")),r.Bb(3),r.kc("ngForOf",n.institutions),r.Bb(2),r.Dc(r.gc(86,82,"STAFF.FORM.INSTITUTIONS_PLACEHOLDER")),r.Bb(4),r.Dc(r.gc(90,84,"STAFF.FORM.IMAGES")),r.Bb(5),r.kc("ngForOf",n.images),r.Bb(2),r.kc("adapter",n.adapter)("itemTemplate",e),r.Bb(2),r.kc("icon",n.faImage),r.Bb(2),r.Dc(r.gc(101,86,"STAFF.FORM.IMAGES_PLACEHOLDER")),r.Bb(4),r.kc("appLoadingButton",n.loading)("dis",!n.form.valid)("label",r.gc(105,88,"GENERAL.LOADING")),r.Bb(4),r.kc("disabled",!n.form.valid),r.Bb(1),r.kc("icon",n.faTrash)}},directives:[s.a,b.a,d.w,d.o,d.j,d.c,d.n,d.h,d.r,B.a,d.p,d.t,i.j,D.b,f.a,k.a,d.q,d.v,i.i,i.k],pipes:[m.c],styles:[".edit-add-user[_ngcontent-%COMP%]{padding:0;list-style:none;font-size:.8rem;background-color:#fff}.form-control[_ngcontent-%COMP%]{border-radius:0;font-size:.8rem;background-color:#fafafa;border:0 solid #fff;border-bottom:1px solid #ddd}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #ff756b}.alert-info[_ngcontent-%COMP%]{padding:.35rem;font-size:.75rem;border-radius:3px}"]}),t}(),w=[{path:"",component:O},{path:"add",component:P},{path:"add/:id",component:P}],x=function(){function t(){}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(n){return new(n||t)},imports:[[a.f.forChild(w)],a.f]}),t}(),H=e("PCNd"),j=e("ct+p"),U=function(){function t(){}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(n){return new(n||t)},imports:[[i.c,B.b,H.a,x,j.HomeModule,m.b,d.s,d.k,f.b,D.c]]}),t}()}}]);